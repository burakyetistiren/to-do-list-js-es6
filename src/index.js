var id = 0;

class ListItem{
	constructor(description, id){
		if(description === "")
		{}
		else
		{
			this.description = description;
			this.id = id;
		}
		var en = new Engine(); //???????????????????????????????????????????????????????????????????????????????
		en.setSearchBar(); //???????????????????????????????????????????????????????????????????????????????

	}

	getDescription(){
		return this.description;
	}
	getId()
	{
		return this.id;
	}
}

class List{
	constructor(){
		this.arr = new Array();
	}

	addToList(item)
	{
		this.arr.push(item);
		//this.foo();
		this.renderList(item);
	}

	removeFromList(item)
	{
		for(var i = 0; i < this.arr.length; i++)
		{
			if(item.getId() == this.arr[i].getId())
				this.arr.splice(i, 1);
		}
		//this.foo();
		this.renderList(item);
	}

	listenerFunc(li, item)
	{
		var answer = window.confirm("Have you completed this activity?");
		if (answer) {
			this.removeFromList(item);
			document.getElementById("toDoList").removeChild(li);
			var en = new Engine(); //???????????????????????????????????????????????????????????????????????????????
			en.setSearchBar(); //???????????????????????????????????????????????????????????????????????????????
		}
		else {}
	}

	renderList(item){
		document.getElementById("toDoList").innerHTML = "";

		for(var i = 0; i < this.arr.length; i++)
		{
			var li = document.createElement("LI");

			li.addEventListener("click", this.listenerFunc);

			var textNode = document.createTextNode(this.arr[i].getDescription()); //???????????????????????????????????????????????????????????????????????????????
			li.appendChild(textNode);
			document.getElementById("toDoList").appendChild(li);
			
		}
	}

	foo(){
		for(var i = 0; i < this.arr.length; i++)
		{
			console.log(this.arr[i].getDescription());
		}
	}

}

class Engine{
	constructor()
	{
		this.setSearchBar();
		this.list = new List();
	}

	setSearchBar()
	{
		document.getElementById("listItem").value = "Enter a task";
		document.getElementById("addButton").disabled = true;
	}

	newItem()
	{
		let newTask = new ListItem(document.getElementById("listItem").value + " id: " + id, id);
		//console.log("desc:" + newTask.getDescription());
		if(newTask.getDescription() === "0"){
			alert("You must write a task!");
		}
		else
		{
			this.list.addToList(newTask);
			id++;	
		}
	}

	refreshText()
	{
		document.getElementById("listItem").value = "";
		document.getElementById("addButton").disabled = false;
	}
}

let en = new Engine();